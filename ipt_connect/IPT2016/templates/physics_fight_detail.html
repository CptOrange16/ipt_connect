{% extends 'head.html' %}

{% block content %}
{% for pf in pf %}

    <div class="page-header">
        <h1>{{pf}}</h1>
    </div>



    <div class="section">
        <h1>Results</h1>
    </div>

    <div class="content container">
        <p class="emphase">Problem presented: <a href="{% url 'problem_detail' pk=pf.problem_presented.pk %}">{{pf.problem_presented.name}}</a></p>
    </div>


    <div class="content container">
        <table>
            <tr>
                <th>Reporter</th>
                <th>Opponent</th>
                <th>Reviewer</th>
            </tr>

            <tr>
                <td><a href="{% url 'team_detail' team_name=pf.reporter.team.name %}">{{pf.reporter.team.name}}</a> -- <a href="{% url 'participant_detail' pk=pf.reporter.pk %}">{{pf.reporter.fullname}}</a></td>
                <td><a href="{% url 'team_detail' team_name=pf.opponent.team.name %}">{{pf.opponent.team.name}}</a> -- <a href="{% url 'participant_detail' pk=pf.opponent.pk %}">{{pf.opponent.fullname}}</a></td>
                <td><a href="{% url 'team_detail' team_name=pf.reviewer.team.name %}">{{pf.reviewer.team.name}}</a> -- <a href="{% url 'participant_detail' pk=pf.reviewer.pk %}">{{pf.reviewer.fullname}}</a></td>
            </tr>

        </table>
    </div>


    <div class="content container">
        <table>
            <tr>
                <th>Jury member</th>
                <th>Grade Reporter</th>
                <th>Grade Opponent</th>
                <th>Grade Reviewer</th>
            </tr>

            {% for jurygrade in jurygrades %}
                <tr>
                    <td><a href="{% url 'jury_detail' pk=jurygrade.jury.pk %}">{{jurygrade.jury.name}}</a></td>
                    <td>{{jurygrade.grade_reporter}}</td>
                    <td>{{jurygrade.grade_opponent}}</td>
                    <td>{{jurygrade.grade_reviewer}}</td>
                </tr>
            {% endfor %}

            <tr>
                <td><p class="emphase">MEAN*</p></td>
                {% for meangrade in meangrades %}
                <td><p class="emphase">{{meangrade}}</p></td>
                {% endfor %}
            </tr>

        </table>
    </div>

    <div class="content container">
        <p class="comment">*Best(s) and worst(s) grade(s) are removed from the mean according to the number of jury members.</p>
    </div>



    <div class="content container">

        {% if tacticalrejections.count > 0 %}
        <p>Tactical rejections:</p>
        {% endif %}
        {% for tacticalrejection in tacticalrejections %}
        <li><a href="{% url 'problem_detail' pk=tacticalrejection.problem.pk %}">{{tacticalrejection.problem.name}}</a></li>
        {% empty %}
        <p>No Tactical Rejections</p>
        {% endfor %}
    </div>

    {% for eternalrejection in eternalrejection %}
    <div class="content container">
        <p>Eternal rejection:</p>
        <li><a href="{% url 'problem_detail' pk=eternalrejection.problem.pk %}">{{eternalrejection.problem.name}}</a></li>
    </div>
    {% empty %}
    <div class="content container">
        <p>No Eternal Rejection</p>
    </div>
    {% endfor %}

    <div class="section">
        <h1>Pre-fight informations</h1>
    </div>

    <div class="content container">
        {% if pf.unavailable_problems %}
            <p class="emphase">Unavailable problems:</p>

            {% if pf.unavailable_problems.presented_this_round %}
                {% for problem in pf.unavailable_problems.presented_this_round %}
                    <li><a href="{% url 'problem_detail' pk=problem.pk %}">{{problem.name}}</a> has already been presented in this round</li>
                {% endfor %}
            {% endif %}

            {% if pf.unavailable_problems.eternal_rejection %}
                {% for problem in pf.unavailable_problems.eternal_rejection %}
                    <li><a href="{% url 'problem_detail' pk=problem.pk %}">{{problem.name}}</a> has been eternally rejected</li>
                {% endfor %}
            {% endif %}

            {% if pf.unavailable_problems.presented_by_reporter %}
                {% for problem in pf.unavailable_problems.presented_by_reporter %}
                    <li><a href="{% url 'problem_detail' pk=problem.pk %}">{{problem.name}}</a> has been presented earlier by the Reporter</li>
                {% endfor %}
            {% endif %}

            {% if pf.unavailable_problems.opposed_by_opponent %}
                {% for problem in pf.unavailable_problems.opposed_by_opponent %}
                    <li><a href="{% url 'problem_detail' pk=problem.pk %}">{{problem.name}}</a> has been opposed earlier by the Opponent</li>
                {% endfor %}
            {% endif %}

            {% if pf.unavailable_problems.presented_by_opponent %}
                {% for problem in pf.unavailable_problems.presented_by_opponent %}
                    <li><a href="{% url 'problem_detail' pk=problem.pk %}">{{problem.name}}</a> has been presented earlier by the Opponent</li>
                {% endfor %}
            {% endif %}


        {% endif %}
    </div>


{% endfor %}
{% endblock content %}